services:
  operator-console:
    build:
      context: ../..
      dockerfile: apps/operator_console/Dockerfile
    container_name: autwinmill_operator_console
    restart: unless-stopped
    ports:
      - "127.0.0.1:${OPERATOR_PORT:-8088}:8088"
    environment:
      OPERATOR_ADMIN_USER: "${OPERATOR_ADMIN_USER:-admin}"
      OPERATOR_ADMIN_PASSWORD: "${OPERATOR_ADMIN_PASSWORD:-change_me}"
      OPERATOR_JWT_SECRET: "${OPERATOR_JWT_SECRET:-change_me_now_32_chars_min}"
      OPERATOR_JWT_TTL_MINUTES: "${OPERATOR_JWT_TTL_MINUTES:-480}"
      OPERATOR_ENV: "${OPERATOR_ENV:-dev}"
      OPERATOR_DEFAULT_TENANT: "${OPERATOR_DEFAULT_TENANT:-default}"
      OPERATOR_ALLOWED_ORIGINS: "${OPERATOR_ALLOWED_ORIGINS:-*}"
      OPERATOR_ALLOWED_ENDPOINT_HOSTS: "${OPERATOR_ALLOWED_ENDPOINT_HOSTS:-}"
      OPERATOR_TOKEN_TARGET_HOSTS: "${OPERATOR_TOKEN_TARGET_HOSTS:-}"
      OPERATOR_DATA_DIR: "/app/data"
      OPERATOR_DB_URL: "${OPERATOR_DB_URL:-}"
      WINDMILL_API_TOKEN: "${WINDMILL_API_TOKEN:-}"
    volumes:
      - operator_console_data:/app/data

volumes:
  operator_console_data:
